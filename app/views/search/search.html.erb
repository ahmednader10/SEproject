
<html>
	
	<div style="position:absolute;top:100px;"><h4> Enter your search query: </h4>
		<%= form_tag("/search", method: "get") do %>
			<%= text_field_tag(:q, value =nil,:placeholder => "Looking for something?", :class => 'form-control' ) %>
			<%= label_tag(:type, "Search for:", :class => 'form-control')) %>
			<%= select_tag(:type, "<option>All</option><option>Users</option><option>Forums</option><option>Ideas</option>".html_safe, :class => 'selectpicker')) %>
			<%= hidden_field_tag(:searchtype, "normal") %>
			<%= submit_tag("Search", :class => 'btn btn-primary')) %>
			<%= link_to "Advanced search", "/advancedsearch" %>
		<% end %>
		
		<% if params[:q].to_s.length != 0 %>
			<% if @results != nil && @results.count != 0 %>
				<h2>Results:</h2>
				<ul>
				<% if User.any? { |e| @results.include? e } %>
					<h3>Users:</h3>
				<% end %>
				<% @results.each do |result| %>
					<% if User.all.include? result %>
						<li><%= link_to result.username, result %> <%= ' (fullname: ' + result.full_name + ')' %></li>
					<% end %>
				<% end %>
				<% if Forum.any? { |e| @results.include? e }  %>
					<h3>Forums:</h3>
				<% end %>
				<% @results.each do |result| %>
					<% if Forum.all.include? result %>
						<li><%= link_to result.title, result %> <%= ' (description: ' + result.description + ')' %></li>
					<% end %>
				<% end %>
				<% if Idea.any? { |e| @results.include? e } %>
					<h3>Ideas:</h3>
				<% end %>
				<% @results.each do |result| %>
					<% if Idea.all.include? result %>
						<% forum = Forum.find(result.forum_id) %>
						<li><%= link_to result.title, forum_idea_path(forum.id, result.id) %> <%= ' (description: ' + result.text + ')' + '(from forum:' + forum.title + ')' %></li>
					<% end %>
				<% end %>
				</ul>
				<%else%>
				<h2> No results found </h2>
			<% end %>
		<%end%>
	
	</div>
</html>